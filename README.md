# Alex Accessibility Bridge (éªšæ–¹æ¡ˆ)

> **æ ¸å¿ƒæ€æƒ³**: HTTPè·å–UIæ ‘ï¼ˆå¿«ï¼‰ï¼ŒADBæ‰§è¡Œæ“ä½œï¼ˆç¨³ï¼‰ã€‚
> 
> ä¸è¿½æ±‚æ–¹æ¡ˆä¼˜é›…ï¼Œåªè¿½æ±‚**éªš**â€”â€”å¿«ä¸”ç¨³ã€‚

---

## é—®é¢˜èƒŒæ™¯

**åŸæ–‡ä»¶æ¡¥æ¥æ–¹æ¡ˆ**:
```
PRoot â†’ æ–‡ä»¶ â†’ Termux â†’ uiautomator dump
```
- å»¶è¿Ÿ: 2-3ç§’
- ç¨³å®šæ€§: å®¹æ˜“å´©æºƒ
- åŸå› : uiautomator dump åœ¨åŠ¨æ€é¡µé¢ä¼šé˜»å¡

**çº¯HTTPæ–¹æ¡ˆ**:
```
PRoot â†’ HTTP â†’ APK â†’ æ— éšœç¢API
```
- å»¶è¿Ÿ: ~50ms âœ¨
- é—®é¢˜: è¾“å…¥æ–‡æœ¬éœ€è¦ç„¦ç‚¹ï¼ŒæŸäº›æ“ä½œå—é™

**éªšæ–¹æ¡ˆï¼ˆæ··åˆï¼‰**:
```
çœ‹: PRoot â†’ HTTP â†’ APK (50ms)
å¹²: PRoot â†’ ADBæ¡¥æ¥ â†’ su -c input (ç¨³å®š)
```
- **å–UIæ ‘**: ç”¨HTTPï¼Œå¿«
- **ç‚¹å‡»/æ»‘åŠ¨/è¾“å…¥**: ç”¨ADBï¼Œç¨³

---

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      HTTP      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Alex UI Bridge APK â”‚
â”‚  Alex in    â”‚  GET /dump     â”‚  (æ— éšœç¢æœåŠ¡)        â”‚
â”‚  PRoot      â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                     â”‚
â”‚             â”‚   JSON UIæ ‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚             â”‚
â”‚             â”‚      æ–‡ä»¶æ¡¥æ¥   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Termux ADB Bridge  â”‚
â”‚             â”‚  input tap     â”‚                     â”‚
â”‚             â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  su -c "input ..."  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   æ‰§è¡Œç»“æœ      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åŠŸèƒ½

| æ“ä½œ | æ–¹å¼ | ç«¯ç‚¹/å‘½ä»¤ | å»¶è¿Ÿ |
|------|------|----------|------|
| è·å–UIæ ‘ | HTTP | `GET /dump` | ~50ms |
| ç‚¹å‡» | ADB | `input tap x y` | ~200ms |
| æ»‘åŠ¨ | ADB | `input swipe x1 y1 x2 y2` | ~300ms |
| è¾“å…¥ | ADB | `input text hello` | ~200ms |
| è¿”å› | ADB | `input keyevent BACK` | ~200ms |
| ä¸»é¡µ | ADB | `input keyevent HOME` | ~200ms |

---

## å®‰è£…

### 1. ç¼–è¯‘APK

```bash
cd accessibility-bridge
./gradlew assembleDebug
```

APKè·¯å¾„: `app/build/outputs/apk/debug/app-debug.apk`

### 2. å®‰è£…åˆ°æ‰‹æœº

```bash
adb install app/build/outputs/apk/debug/app-debug.apk
# æˆ–
su -c "pm install -r app-debug.apk"
```

### 3. å¯åŠ¨æœåŠ¡

1. æ‰“å¼€ **Alex UI Bridge** åº”ç”¨
2. ç‚¹å‡» **"å¼€å¯æ— éšœç¢æƒé™"** â†’ åœ¨ç³»ç»Ÿè®¾ç½®ä¸­æ‰¾åˆ°å¹¶å¼€å¯
3. è¿”å›åº”ç”¨ï¼Œç‚¹å‡» **"å¯åŠ¨UI TreeæœåŠ¡"**
4. é€šçŸ¥æ æ˜¾ç¤º **"UI TreeæœåŠ¡è¿è¡Œä¸­"**

### 4. æµ‹è¯•

```bash
# æµ‹è¯•HTTPè¿æ¥
curl http://localhost:8080/ping
# â†’ {"status":"ok"}

# è·å–UIæ ‘
curl http://localhost:8080/dump
# â†’ JSONæ ¼å¼UIæ ‘
```

---

## Pythonå®¢æˆ·ç«¯

### éªšæ–¹æ¡ˆå®¢æˆ·ç«¯ (æ¨è)

```python
from hybrid_client import get_client

client = get_client()

# è·å–UIæ ‘ (HTTP, å¿«)
elements = client.get_ui_tree()
print(f"è·å–åˆ° {len(elements)} ä¸ªå…ƒç´ ")

# ç‚¹å‡» (ADB, ç¨³)
client.tap(540, 1000)

# æ ¹æ®æ–‡æœ¬ç‚¹å‡»
client.tap_text("ç¡®å®š")

# æ»‘åŠ¨
client.swipe_up()

# è¾“å…¥
client.type_text("Hello World")

# å¯¼èˆª
client.back()
client.home()
```

### æŸ¥çœ‹å±å¹•å†…å®¹

```python
print(client.see_text())
```

è¾“å‡º:
```
ğŸ“± å½“å‰å±å¹•:
==================================================
1. æœç´¢ @ (540, 300)
2. ç¡®å®š @ (800, 1200)
3. è¿”å› @ (100, 200)
...
```

---

## æ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ | å–UIæ ‘ | ç‚¹å‡» | è¯´æ˜ |
|------|--------|------|------|
| æ–‡ä»¶æ¡¥æ¥ | 2-3s | 2-3s | åŸæ–¹æ¡ˆï¼Œæ˜“å´©æºƒ |
| çº¯HTTP | ~50ms | ~50ms | è¾“å…¥å—é™ |
| **éªšæ–¹æ¡ˆ** | **~50ms** | **~200ms** | **åˆå¿«åˆç¨³** âœ… |

---

## æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `BridgeAccessibilityService.java` | æ— éšœç¢æœåŠ¡ï¼Œåªæä¾›UIæ ‘ |
| `BridgeHttpService.java` | HTTPæœåŠ¡å™¨ï¼Œåªæš´éœ² `/ping` å’Œ `/dump` |
| `MainActivity.java` | ä¸»ç•Œé¢ï¼Œæ§åˆ¶æœåŠ¡å¯åŠ¨/åœæ­¢ |
| `hybrid_client.py` | Pythonæ··åˆå®¢æˆ·ç«¯ |

---

## æŠ€æœ¯æ ˆ

- Kotlin (APK)
- NanoHTTPD (HTTPæœåŠ¡å™¨)
- Android Accessibility Service (UIæ ‘è·å–)
- Python (å®¢æˆ·ç«¯)
- ADB + Root (æ“ä½œæ‰§è¡Œ)

---

## æ³¨æ„äº‹é¡¹

1. **æ— éšœç¢æƒé™**: å¿…é¡»æ‰‹åŠ¨å¼€å¯ï¼ˆç³»ç»Ÿé™åˆ¶ï¼‰
2. **ADBæ¡¥æ¥**: éœ€è¦ç¡®ä¿ `~/.termux/adb-bridge.sh` åœ¨è¿è¡Œ
3. **åå°ä¿æ´»**: å·²ä½¿ç”¨å‰å°æœåŠ¡ï¼Œä½†å»ºè®®ä¿æŒå……ç”µçŠ¶æ€

---

## License

MIT

---

**éªšå°±å®Œäº‹äº†** ğŸ”¥
